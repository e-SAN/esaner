{"version":3,"file":"/server/publish.coffee.js","sources":["publish.coffee"],"names":[],"mappings":";AAAA,IAAC,SAAD,GAAY,SAAC,IAAD;AACX,MAAoB,YAApB;WAAO,KAAP;;SACA,SAAQ,KAAR,IAAiB;;cAFN;CAAZ;;MAIM,CAAC,OAAP,CAAe,MAAf,EAAuB,SAAC,QAAD,EAAW,EAAX;AACtB,MAAG,SAAS,QAAT,CAAH;WACC,KAAK,CAAC,IAAN,CAAW;WAAK,EAAL;KAAX,EADD;GADsB;CAAvB,CAJA;;MAQM,CAAC,OAAP,CAAe,UAAf,EAA2B,SAAC,QAAD,EAAW,EAAX;AAC1B,MAAG,SAAS,QAAT,CAAH;WACC,KAAK,CAAC,IAAN,CAAW;WAAK;QAAC;UAAC,KAAK,EAAN;SAAD,EAAY;UAAC,QAAO,EAAR;SAAZ;OAAL;KAAX,EADD;GAD0B;CAA3B,CARA;;MAYM,CAAC,OAAP,CAAe,OAAf,EAAwB,SAAC,QAAD;AACvB,MAAG,SAAS,QAAT,CAAH;WACC,KAAK,CAAC,IAAN,CAAW,EAAX,EADD;GADuB;CAAxB,CAZA;;MAmBM,CAAC,OAAP,CAAe,UAAf,EAA2B,SAAC,QAAD,EAAW,EAAX;AAC1B,MAAG,SAAS,YAAa,YAAtB,CAAH;WACC,KAAK,CAAC,IAAN,CAAW;cAAO,EAAP;AACV;;;;;SADU;KAAX,EADD;GAD0B;CAA3B,CAnBA;;MA2BM,CAAC,OAAP,CAAe,OAAf,EAAwB,SAAC,MAAD;SACvB,KAAK,CAAC,IAAN,CAAW;UAAK,MAAL;GAAX,EADuB;CAAxB,CA3BA;;MA8BM,CAAC,OAAP,CAAe,UAAf,EAA2B,SAAC,QAAD;AAC1B,MAAG,SAAS,QAAT,CAAH;WACC,KAAK,CAAC,IAAN,CAAW,EAAX,EADD;GAD0B;CAA3B,CA9BA;A","sourcesContent":["@approved = (name) ->\n\treturn false unless name?\n\tname is 'J.K' or WList.findOne(username:name)?\n\nMeteor.publish \"post\", (username, id)->\n\tif approved username\n\t\tPosts.find _id: id\n\nMeteor.publish \"fullpost\", (username, id)->\n\tif approved username\n\t\tPosts.find $or: [{_id: id}, {parent:id}]\n\nMeteor.publish \"posts\", (username)->\n\tif approved username #and username? in ['j.k'] #<--this works! so we will add white-list\n\t\tPosts.find {} #parent:null #,\n\t\t\t#fields:\n\t\t\t#\tcontent:false\n\t\t\t\t#owner:false\n\nMeteor.publish \"comments\", (username, id)->\n\tif approved username and id?\n\t\tPosts.find parent:id #,\n\t\t\t###\n\t\t\t\tfields:\n\t\t\t\tcontent:false\n\t\t\t\t#owner:false\n\t\t\t###\nMeteor.publish \"likes\", (postid)->\n\tLikes.find post:postid\n\nMeteor.publish \"appusers\", (username) ->\n\tif approved username\n\t\tWList.find {} #Meteor.users.find().fetch()\n\n"]}